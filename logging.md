# Логирование событий

Сбор логов можно включить как для продюсера так и для консьюмера, а так же можно собирать статистику и отладочную информацию. Для этого достаточно указать каталог куда будут писаться логи.

```1c
Компонента.КаталогЛогов = "/var/log/simpleKafka/";
```

Формат имени файла, в который будут записываться логи

```
{type}_{client.id}_{pid}_{dateformat}.log
```

**type** – consumer, producer, statistics, dump

**client.id** – произвольный идентификатор (параметр клиента), например Компонента.УстановитьПараметр("client.id", "testProducer")

**pid** – process id addnhost

**dateformat** – формат даты, указанный в **ФорматИмениФайловЛога**

По умолчанию новый файл лога будет создаваться каждый новый день. Периодичность создания нового файла задается через установку формата в свойстве **ФорматИмениФайловЛога**

```1c
Компонента.УстановитьПараметр("client.id", "cls567");
Компонента.ФорматИмениФайловЛога = "%Y%m%d"; // consumer_cls567_30134_20230925.log
```

Если планируется использование компоненты на клиенте в асинхронном режиме, то необходимо использовать методы:

```1c
УстановитьКаталогЛогов(Каталог)
```

```1c
УстановитьФорматЛогов(ФорматИмениФайловЛога)
```


# Отладочная информация библиотеки

Для получения отладочной информации библиотеки **librdkafka** необходимо установить параметр **debug**
Для сбора всех событий значение для указанного параметра будет:

```
generic, broker, topic, metadata, feature, queue, msg, protocol, cgrp, security, fetch, interceptor, plugin, consumer, admin, eos, mock, assignor, conf, all
```

## События продюсера
```1c
УстановитьПараметр("debug", "broker,topic,msg")
```

## События консьюмера
```1c
УстановитьПараметр("debug", "consumer,cgrp,topic,fetch")
```

# Сбор статистики

Статистика начнет собираться в отдельный файл, если установлено значение параметра **statistics.interval.ms**. 
Более подробно о показателях статистики [здесь](https://github.com/confluentinc/librdkafka/blob/master/STATISTICS.md)

```1c
УстановитьПараметр("statistics.interval.ms", "15000")
```

Рекомендуется не устанавливать маленькое значение параметра, т.к. каждая запись статистики содержит в себе порядка 200 параметров.

